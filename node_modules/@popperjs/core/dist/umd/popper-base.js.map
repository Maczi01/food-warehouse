{"version":3,"file":"popper-base.js","sources":["../../src/dom-utils/getBoundingClientRect.js","../../src/dom-utils/getWindow.js","../../src/dom-utils/getWindowScroll.js","../../src/dom-utils/instanceOf.js","../../src/dom-utils/getHTMLElementScroll.js","../../src/dom-utils/getNodeScroll.js","../../src/dom-utils/getNodeName.js","../../src/dom-utils/getDocumentElement.js","../../src/dom-utils/getWindowScrollBarX.js","../../src/dom-utils/getCompositeRect.js","../../src/dom-utils/getLayoutRect.js","../../src/dom-utils/getParentNode.js","../../src/dom-utils/getComputedStyle.js","../../src/dom-utils/getScrollParent.js","../../src/dom-utils/listScrollParents.js","../../src/dom-utils/isTableElement.js","../../src/dom-utils/getOffsetParent.js","../../src/enums.js","../../src/utils/orderModifiers.js","../../src/utils/debounce.js","../../src/utils/format.js","../../src/utils/validateModifiers.js","../../src/utils/uniqueBy.js","../../src/utils/getBasePlacement.js","../../src/utils/mergeByName.js","../../src/index.js","../../src/dom-utils/getViewportRect.js","../../src/dom-utils/getDocumentRect.js","../../src/dom-utils/getBorders.js","../../src/dom-utils/getDecorations.js","../../src/dom-utils/contains.js","../../src/utils/rectToClientRect.js","../../src/dom-utils/getClippingRect.js","../../src/utils/getVariation.js","../../src/utils/getMainAxisFromPlacement.js","../../src/utils/computeOffsets.js","../../src/utils/getFreshSideObject.js","../../src/utils/mergePaddingObject.js","../../src/utils/expandToHashMap.js","../../src/utils/detectOverflow.js"],"sourcesContent":["// @flow\nimport type { ClientRectObject, VirtualElement } from '../types';\n\nexport default function getBoundingClientRect(\n  element: Element | VirtualElement\n): ClientRectObject {\n  const rect = element.getBoundingClientRect();\n\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: rect.top,\n    right: rect.right,\n    bottom: rect.bottom,\n    left: rect.left,\n    x: rect.left,\n    y: rect.top,\n  };\n}\n","// @flow\n/*:: import type { Window } from '../types'; */\n/*:: declare function getWindow(node: Node | Window): Window; */\n\nexport default function getWindow(node) {\n  if (node.toString() !== '[object Window]') {\n    const ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView : window;\n  }\n\n  return node;\n}\n","// @flow\nimport getWindow from './getWindow';\nimport type { Window } from '../types';\n\nexport default function getWindowScroll(node: Node | Window) {\n  const win = getWindow(node);\n  const scrollLeft = win.pageXOffset;\n  const scrollTop = win.pageYOffset;\n\n  return {\n    scrollLeft,\n    scrollTop,\n  };\n}\n","// @flow\nimport getWindow from './getWindow';\n\n/*:: declare function isElement(node: mixed): boolean %checks(node instanceof\n  Element); */\n\nfunction isElement(node) {\n  const OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\n/*:: declare function isHTMLElement(node: mixed): boolean %checks(node instanceof\n  HTMLElement); */\n\nfunction isHTMLElement(node) {\n  const OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nexport { isElement, isHTMLElement };\n","// @flow\n\nexport default function getHTMLElementScroll(element: HTMLElement) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop,\n  };\n}\n","// @flow\nimport getWindowScroll from './getWindowScroll';\nimport getWindow from './getWindow';\nimport { isHTMLElement } from './instanceOf';\nimport getHTMLElementScroll from './getHTMLElementScroll';\nimport type { Window } from '../types';\n\nexport default function getNodeScroll(node: Node | Window) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}\n","// @flow\nimport type { Window } from '../types';\n\nexport default function getNodeName(element: ?Node | Window): ?string {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}\n","// @flow\nimport { isElement } from './instanceOf';\nimport type { Window } from '../types';\n\nexport default function getDocumentElement(\n  element: Element | Window\n): HTMLElement {\n  // $FlowFixMe: assume body is always available\n  return (isElement(element) ? element.ownerDocument : element.document)\n    .documentElement;\n}\n","// @flow\nimport getBoundingClientRect from './getBoundingClientRect';\nimport getDocumentElement from './getDocumentElement';\nimport getWindowScroll from './getWindowScroll';\n\nexport default function getWindowScrollBarX(element: Element): number {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return (\n    getBoundingClientRect(getDocumentElement(element)).left +\n    getWindowScroll(element).scrollLeft\n  );\n}\n","// @flow\nimport type { Rect, VirtualElement, Window } from '../types';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport getNodeScroll from './getNodeScroll';\nimport getNodeName from './getNodeName';\nimport { isHTMLElement } from './instanceOf';\nimport getWindowScrollBarX from './getWindowScrollBarX';\nimport getDocumentElement from './getDocumentElement';\n\n// Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\nexport default function getCompositeRect(\n  elementOrVirtualElement: Element | VirtualElement,\n  offsetParent: Element | Window,\n  isFixed: boolean = false\n): Rect {\n  let documentElement;\n  const rect = getBoundingClientRect(elementOrVirtualElement);\n\n  let scroll = { scrollLeft: 0, scrollTop: 0 };\n  let offsets = { x: 0, y: 0 };\n\n  if (!isFixed) {\n    if (getNodeName(offsetParent) !== 'body') {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if ((documentElement = getDocumentElement(offsetParent))) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// @flow\nimport type { Rect } from '../types';\n\n// Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\nexport default function getLayoutRect(element: HTMLElement): Rect {\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: element.offsetWidth,\n    height: element.offsetHeight,\n  };\n}\n","// @flow\nimport getNodeName from './getNodeName';\n\nexport default function getParentNode(element: Node | ShadowRoot): Node {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    document.ownerDocument || // Fallback to ownerDocument if available\n    document.documentElement // Or to documentElement if everything else fails\n  );\n}\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getComputedStyle(\n  element: Element\n): CSSStyleDeclaration {\n  return getWindow(element).getComputedStyle(element);\n}\n","// @flow\nimport getParentNode from './getParentNode';\nimport getComputedStyle from './getComputedStyle';\nimport getNodeName from './getNodeName';\nimport { isHTMLElement } from './instanceOf';\n\nexport default function getScrollParent(node: Node): HTMLElement {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node)) {\n    // Firefox wants us to check `-x` and `-y` variations as well\n    const { overflow, overflowX, overflowY } = getComputedStyle(node);\n\n    if (/auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX)) {\n      return node;\n    }\n  }\n\n  return getScrollParent(getParentNode(node));\n}\n","// @flow\nimport getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\nimport getNodeName from './getNodeName';\nimport getWindow from './getWindow';\nimport type { Window } from '../types';\n\nexport default function listScrollParents(\n  element: Node,\n  list: Array<Element | Window> = []\n): Array<Element | Window> {\n  const scrollParent = getScrollParent(element);\n  const isBody = getNodeName(scrollParent) === 'body';\n  const target = isBody ? getWindow(scrollParent) : scrollParent;\n  const updatedList = list.concat(target);\n\n  return isBody\n    ? updatedList\n    : // $FlowFixMe: isBody tells us target will be an HTMLElement here\n      updatedList.concat(listScrollParents(getParentNode(target)));\n}\n","// @flow\nimport getNodeName from './getNodeName';\n\nexport default function isTableElement(element: Element): boolean {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}\n","// @flow\nimport getWindow from './getWindow';\nimport getNodeName from './getNodeName';\nimport getComputedStyle from './getComputedStyle';\nimport { isHTMLElement } from './instanceOf';\nimport isTableElement from './isTableElement';\n\nfunction getTrueOffsetParent(element: Element): ?Element {\n  if (\n    !isHTMLElement(element) ||\n    // https://github.com/popperjs/popper-core/issues/837\n    getComputedStyle(element).position === 'fixed'\n  ) {\n    return null;\n  }\n\n  return element.offsetParent;\n}\n\nexport default function getOffsetParent(element: Element) {\n  const window = getWindow(element);\n\n  let offsetParent = getTrueOffsetParent(element);\n\n  // Find the nearest non-table offsetParent\n  while (offsetParent && isTableElement(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (\n    offsetParent &&\n    getNodeName(offsetParent) === 'body' &&\n    getComputedStyle(offsetParent).position === 'static'\n  ) {\n    return window;\n  }\n\n  return offsetParent || window;\n}\n","// @flow\nexport const top: 'top' = 'top';\nexport const bottom: 'bottom' = 'bottom';\nexport const right: 'right' = 'right';\nexport const left: 'left' = 'left';\nexport const auto: 'auto' = 'auto';\nexport type BasePlacement =\n  | typeof top\n  | typeof bottom\n  | typeof right\n  | typeof left;\nexport const basePlacements: Array<BasePlacement> = [top, bottom, right, left];\n\nexport const start: 'start' = 'start';\nexport const end: 'end' = 'end';\nexport type Variation = typeof start | typeof end;\n\nexport const clippingParents: 'clippingParents' = 'clippingParents';\nexport const viewport: 'viewport' = 'viewport';\nexport type Boundary =\n  | HTMLElement\n  | Array<HTMLElement>\n  | typeof clippingParents;\nexport type RootBoundary = typeof viewport | 'document';\n\nexport const popper: 'popper' = 'popper';\nexport const reference: 'reference' = 'reference';\nexport type Context = typeof popper | typeof reference;\n\nexport type VariationPlacement =\n  | 'top-start'\n  | 'top-end'\n  | 'bottom-start'\n  | 'bottom-end'\n  | 'right-start'\n  | 'right-end'\n  | 'left-start'\n  | 'left-end';\nexport type AutoPlacement = 'auto' | 'auto-start' | 'auto-end';\nexport type ComputedPlacement = VariationPlacement | BasePlacement;\nexport type Placement = AutoPlacement | BasePlacement | VariationPlacement;\n\nexport const variationPlacements: Array<VariationPlacement> = basePlacements.reduce(\n  (acc: Array<VariationPlacement>, placement: BasePlacement) =>\n    acc.concat([(`${placement}-${start}`: any), (`${placement}-${end}`: any)]),\n  []\n);\nexport const placements: Array<Placement> = [...basePlacements, auto].reduce(\n  (\n    acc: Array<Placement>,\n    placement: BasePlacement | typeof auto\n  ): Array<Placement> =>\n    acc.concat([\n      placement,\n      (`${placement}-${start}`: any),\n      (`${placement}-${end}`: any),\n    ]),\n  []\n);\n\n// modifiers that need to read the DOM\nexport const beforeRead: 'beforeRead' = 'beforeRead';\nexport const read: 'read' = 'read';\nexport const afterRead: 'afterRead' = 'afterRead';\n// pure-logic modifiers\nexport const beforeMain: 'beforeMain' = 'beforeMain';\nexport const main: 'main' = 'main';\nexport const afterMain: 'afterMain' = 'afterMain';\n// modifier with the purpose to write to the DOM (or write into a framework state)\nexport const beforeWrite: 'beforeWrite' = 'beforeWrite';\nexport const write: 'write' = 'write';\nexport const afterWrite: 'afterWrite' = 'afterWrite';\nexport const modifierPhases: Array<ModifierPhases> = [\n  beforeRead,\n  read,\n  afterRead,\n  beforeMain,\n  main,\n  afterMain,\n  beforeWrite,\n  write,\n  afterWrite,\n];\n\nexport type ModifierPhases =\n  | typeof beforeRead\n  | typeof read\n  | typeof afterRead\n  | typeof beforeMain\n  | typeof main\n  | typeof afterMain\n  | typeof beforeWrite\n  | typeof write\n  | typeof afterWrite;\n","// @flow\nimport type { Modifier } from '../types';\nimport { modifierPhases } from '../enums';\n\n// source: https://stackoverflow.com/questions/49875255\nfunction order(modifiers) {\n  const map = new Map();\n  const visited = new Set();\n  const result = [];\n\n  modifiers.forEach(modifier => {\n    map.set(modifier.name, modifier);\n  });\n\n  // On visiting object, check for its dependencies and visit them recursively\n  function sort(modifier: Modifier<any>) {\n    visited.add(modifier.name);\n\n    const requires = [\n      ...(modifier.requires || []),\n      ...(modifier.requiresIfExists || []),\n    ];\n\n    requires.forEach(dep => {\n      if (!visited.has(dep)) {\n        const depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n\n    result.push(modifier);\n  }\n\n  modifiers.forEach(modifier => {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n\n  return result;\n}\n\nexport default function orderModifiers(\n  modifiers: Array<Modifier<any>>\n): Array<Modifier<any>> {\n  // order based on dependencies\n  const orderedModifiers = order(modifiers);\n\n  // order based on phase\n  return modifierPhases.reduce((acc, phase) => {\n    return acc.concat(\n      orderedModifiers.filter(modifier => modifier.phase === phase)\n    );\n  }, []);\n}\n","// @flow\n\nexport default function debounce<T>(fn: Function): () => Promise<T> {\n  let pending;\n  return () => {\n    if (!pending) {\n      pending = new Promise<T>(resolve => {\n        Promise.resolve().then(() => {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}\n","// @flow\n\nexport default function format(str: string, ...args: Array<string>) {\n  return [...args].reduce((p, c) => p.replace(/%s/, c), str);\n}\n","// @flow\nimport format from './format';\nimport { modifierPhases } from '../enums';\n\nconst INVALID_MODIFIER_ERROR =\n  'Popper: modifier \"%s\" provided an invalid %s property, expected %s but got %s';\nconst MISSING_DEPENDENCY_ERROR =\n  'Popper: modifier \"%s\" requires \"%s\", but \"%s\" modifier is not available';\nconst VALID_PROPERTIES = [\n  'name',\n  'enabled',\n  'phase',\n  'fn',\n  'effect',\n  'requires',\n  'options',\n];\n\nexport default function validateModifiers(modifiers: Array<any>): void {\n  modifiers.forEach(modifier => {\n    Object.keys(modifier).forEach(key => {\n      switch (key) {\n        case 'name':\n          if (typeof modifier.name !== 'string') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                String(modifier.name),\n                '\"name\"',\n                '\"string\"',\n                `\"${String(modifier.name)}\"`\n              )\n            );\n          }\n          break;\n        case 'enabled':\n          if (typeof modifier.enabled !== 'boolean') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"enabled\"',\n                '\"boolean\"',\n                `\"${String(modifier.enabled)}\"`\n              )\n            );\n          }\n        case 'phase':\n          if (modifierPhases.indexOf(modifier.phase) < 0) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"phase\"',\n                `either ${modifierPhases.join(', ')}`,\n                `\"${String(modifier.phase)}\"`\n              )\n            );\n          }\n          break;\n        case 'fn':\n          if (typeof modifier.fn !== 'function') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"fn\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'effect':\n          if (typeof modifier.effect !== 'function') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"effect\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'requires':\n          if (!Array.isArray(modifier.requires)) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"requires\"',\n                '\"array\"',\n                `\"${String(modifier.requires)}\"`\n              )\n            );\n          }\n          break;\n        case 'requiresIfExists':\n          if (!Array.isArray(modifier.requiresIfExists)) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"requiresIfExists\"',\n                '\"array\"',\n                `\"${String(modifier.requiresIfExists)}\"`\n              )\n            );\n          }\n          break;\n        case 'options':\n        case 'data':\n          break;\n        default:\n          console.error(\n            `PopperJS: an invalid property has been provided to the \"${\n              modifier.name\n            }\" modifier, valid properties are ${VALID_PROPERTIES.map(\n              s => `\"${s}\"`\n            ).join(', ')}; but \"${key}\" was provided.`\n          );\n      }\n\n      modifier.requires &&\n        modifier.requires.forEach(requirement => {\n          if (modifiers.find(mod => mod.name === requirement) == null) {\n            console.error(\n              format(\n                MISSING_DEPENDENCY_ERROR,\n                String(modifier.name),\n                requirement,\n                requirement\n              )\n            );\n          }\n        });\n    });\n  });\n}\n","// @flow\n\nexport default function uniqueBy<T>(arr: Array<T>, fn: T => any): Array<T> {\n  const identifiers = new Set();\n\n  return arr.filter(item => {\n    const identifier = fn(item);\n\n    if (!identifiers.has(identifier)) {\n      identifiers.add(identifier);\n      return true;\n    }\n  });\n}\n","// @flow\nimport { type BasePlacement, type Placement, auto } from '../enums';\n\nexport default function getBasePlacement(\n  placement: Placement | typeof auto\n): BasePlacement {\n  return (placement.split('-')[0]: any);\n}\n","// @flow\nimport type { Modifier } from '../types';\n\nexport default function mergeByName(\n  modifiers: Array<$Shape<Modifier<any>>>\n): Array<$Shape<Modifier<any>>> {\n  const merged = modifiers.reduce((merged, current) => {\n    const existing = merged[current.name];\n    merged[current.name] = existing\n      ? {\n          ...existing,\n          ...current,\n          options: { ...existing.options, ...current.options },\n          data: { ...existing.data, ...current.data },\n        }\n      : current;\n    return merged;\n  }, {});\n\n  // IE11 does not support Object.values\n  return Object.keys(merged).map(key => merged[key]);\n}\n","// @flow\nimport type {\n  State,\n  Options,\n  Modifier,\n  Instance,\n  VirtualElement,\n} from './types';\nimport getCompositeRect from './dom-utils/getCompositeRect';\nimport getLayoutRect from './dom-utils/getLayoutRect';\nimport listScrollParents from './dom-utils/listScrollParents';\nimport getOffsetParent from './dom-utils/getOffsetParent';\nimport getComputedStyle from './dom-utils/getComputedStyle';\nimport orderModifiers from './utils/orderModifiers';\nimport debounce from './utils/debounce';\nimport validateModifiers from './utils/validateModifiers';\nimport uniqueBy from './utils/uniqueBy';\nimport getBasePlacement from './utils/getBasePlacement';\nimport mergeByName from './utils/mergeByName';\nimport { isElement } from './dom-utils/instanceOf';\nimport { auto } from './enums';\n\nexport type * from './types';\nexport * from './enums';\n\nconst INVALID_ELEMENT_ERROR =\n  'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nconst INFINITE_LOOP_ERROR =\n  'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\n\nconst DEFAULT_OPTIONS: Options = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute',\n};\n\ntype PopperGeneratorArgs = {\n  defaultModifiers?: Array<Modifier<any>>,\n  defaultOptions?: $Shape<Options>,\n};\n\nfunction areValidElements(...args: Array<any>): boolean {\n  return !args.some(\n    element => !(element && typeof element.getBoundingClientRect === 'function')\n  );\n}\n\nexport function popperGenerator(generatorOptions: PopperGeneratorArgs = {}) {\n  const {\n    defaultModifiers = [],\n    defaultOptions = DEFAULT_OPTIONS,\n  } = generatorOptions;\n\n  return function createPopper(\n    reference: Element | VirtualElement,\n    popper: HTMLElement,\n    options: $Shape<Options> = defaultOptions\n  ): Instance {\n    let state: $Shape<State> = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: { ...DEFAULT_OPTIONS, ...defaultOptions },\n      modifiersData: {},\n      elements: {\n        reference,\n        popper,\n      },\n      attributes: {},\n      styles: {},\n    };\n\n    let effectCleanupFns: Array<() => void> = [];\n    let isDestroyed = false;\n\n    const instance = {\n      state,\n      setOptions(options) {\n        cleanupModifierEffects();\n\n        state.options = {\n          ...defaultOptions,\n          ...state.options,\n          ...options,\n        };\n\n        state.scrollParents = {\n          reference: isElement(reference)\n            ? listScrollParents(reference)\n            : reference.contextElement\n            ? listScrollParents(reference.contextElement)\n            : [],\n          popper: listScrollParents(popper),\n        };\n\n        // Orders the modifiers based on their dependencies and `phase`\n        // properties\n        const orderedModifiers = orderModifiers(\n          mergeByName([...defaultModifiers, ...state.options.modifiers])\n        );\n\n        // Strip out disabled modifiers\n        state.orderedModifiers = orderedModifiers.filter(m => m.enabled);\n\n        // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n        if (__DEV__) {\n          const modifiers = uniqueBy(\n            [...orderedModifiers, ...state.options.modifiers],\n            ({ name }) => name\n          );\n\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            const flipModifier = state.orderedModifiers.find(\n              ({ name }) => name === 'flip'\n            );\n\n            if (!flipModifier) {\n              console.error(\n                [\n                  'Popper: \"auto\" placements require the \"flip\" modifier be',\n                  'present and enabled to work.',\n                ].join(' ')\n              );\n            }\n          }\n\n          const {\n            marginTop,\n            marginRight,\n            marginBottom,\n            marginLeft,\n          } = getComputedStyle(popper);\n\n          // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n          if (\n            [marginTop, marginRight, marginBottom, marginLeft].some(margin =>\n              parseFloat(margin)\n            )\n          ) {\n            console.warn(\n              [\n                'Popper: CSS \"margin\" styles cannot be used to apply padding',\n                'between the popper and its reference element or boundary.',\n                'To replicate margin, use the `offset` modifier, as well as',\n                'the `padding` option in the `preventOverflow` and `flip`',\n                'modifiers.',\n              ].join(' ')\n            );\n          }\n        }\n\n        runModifierEffects();\n\n        return instance.update();\n      },\n\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        const { reference, popper } = state.elements;\n\n        // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n        if (!areValidElements(reference, popper)) {\n          if (__DEV__) {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n          return;\n        }\n\n        // Store the reference and popper rects to be read by modifiers\n        state.rects = {\n          reference: getCompositeRect(\n            reference,\n            getOffsetParent(popper),\n            state.options.strategy === 'fixed'\n          ),\n          popper: getLayoutRect(popper),\n        };\n\n        // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n        state.reset = false;\n\n        state.placement = state.options.placement;\n\n        // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n        state.orderedModifiers.forEach(\n          modifier =>\n            (state.modifiersData[modifier.name] = {\n              ...modifier.data,\n            })\n        );\n\n        let __debug_loops__ = 0;\n        for (let index = 0; index < state.orderedModifiers.length; index++) {\n          if (__DEV__) {\n            __debug_loops__ += 1;\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          const { fn, options = {}, name } = state.orderedModifiers[index];\n\n          if (typeof fn === 'function') {\n            state = fn({ state, options, name, instance }) || state;\n          }\n        }\n      },\n\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce<$Shape<State>>(\n        () =>\n          new Promise<$Shape<State>>(resolve => {\n            instance.forceUpdate();\n            resolve(state);\n          })\n      ),\n\n      destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      },\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (__DEV__) {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n      return instance;\n    }\n\n    instance.setOptions(options).then(state => {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    });\n\n    // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(({ name, options = {}, effect }) => {\n        if (typeof effect === 'function') {\n          const cleanupFn = effect({ state, name, instance, options });\n          const noopFn = () => {};\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(fn => fn());\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\n\nexport const createPopper = popperGenerator();\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getViewportRect(element: Element) {\n  const win = getWindow(element);\n\n  return {\n    width: win.innerWidth,\n    height: win.innerHeight,\n    x: 0,\n    y: 0,\n  };\n}\n","// @flow\nimport type { Rect } from '../types';\nimport getCompositeRect from './getCompositeRect';\nimport getWindow from './getWindow';\nimport getDocumentElement from './getDocumentElement';\nimport getWindowScroll from './getWindowScroll';\n\nexport default function getDocumentRect(element: HTMLElement): Rect {\n  const win = getWindow(element);\n  const winScroll = getWindowScroll(element);\n  const documentRect = getCompositeRect(getDocumentElement(element), win);\n\n  documentRect.height = Math.max(documentRect.height, win.innerHeight);\n  documentRect.width = Math.max(documentRect.width, win.innerWidth);\n  documentRect.x = -winScroll.scrollLeft;\n  documentRect.y = -winScroll.scrollTop;\n\n  return documentRect;\n}\n","// @flow\nimport type { SideObject } from '../types';\nimport getComputedStyle from './getComputedStyle';\nimport { isHTMLElement } from './instanceOf';\n\nfunction toNumber(cssValue: string): number {\n  return parseFloat(cssValue) || 0;\n}\n\nexport default function getBorders(element: Element): SideObject {\n  const computedStyle = isHTMLElement(element) ? getComputedStyle(element) : {};\n\n  return {\n    top: toNumber(computedStyle.borderTopWidth),\n    right: toNumber(computedStyle.borderRightWidth),\n    bottom: toNumber(computedStyle.borderBottomWidth),\n    left: toNumber(computedStyle.borderLeftWidth),\n  };\n}\n","// @flow\nimport type { SideObject } from '../types';\nimport getBorders from './getBorders';\nimport getNodeName from './getNodeName';\nimport getWindow from './getWindow';\nimport getWindowScrollBarX from './getWindowScrollBarX';\n\n// Borders + scrollbars\nexport default function getDecorations(element: HTMLElement): SideObject {\n  const win = getWindow(element);\n  const borders = getBorders(element);\n  const isHTML = getNodeName(element) === 'html';\n  const winScrollBarX = getWindowScrollBarX(element);\n\n  const x = element.clientWidth + borders.right;\n  let y = element.clientHeight + borders.bottom;\n\n  // HACK:\n  // document.documentElement.clientHeight on iOS reports the height of the\n  // viewport including the bottom bar, even if the bottom bar isn't visible.\n  // If the difference between window innerHeight and html clientHeight is more\n  // than 50, we assume it's a mobile bottom bar and ignore scrollbars.\n  // * A 50px thick scrollbar is likely non-existent (macOS is 15px and Windows\n  //   is about 17px)\n  // * The mobile bar is 114px tall\n  if (isHTML && win.innerHeight - element.clientHeight > 50) {\n    y = win.innerHeight - borders.bottom;\n  }\n\n  return {\n    top: isHTML ? 0 : element.clientTop,\n    right:\n      // RTL scrollbar (scrolling containers only)\n      element.clientLeft > borders.left\n        ? borders.right\n        : // LTR scrollbar\n        isHTML\n        ? win.innerWidth - x - winScrollBarX\n        : element.offsetWidth - x,\n    bottom: isHTML ? win.innerHeight - y : element.offsetHeight - y,\n    left: isHTML ? winScrollBarX : element.clientLeft,\n  };\n}\n","// @flow\nexport default function contains(parent: Element, child: Element) {\n  // $FlowFixMe: hasOwnProperty doesn't seem to work in tests\n  const isShadow = Boolean(child.getRootNode && child.getRootNode().host);\n\n  // First, attempt with faster native method\n  if (parent.contains(child)) {\n    return true;\n  }\n  // then fallback to custom implementation with Shadow DOM support\n  else if (isShadow) {\n    let next = child;\n    do {\n      if (next && parent.isSameNode(next)) {\n        return true;\n      }\n      // $FlowFixMe: need a better way to handle this...\n      next = next.parentNode || next.host;\n    } while (next);\n  }\n\n  // Give up, the result is false\n  return false;\n}\n","// @flow\nimport type { Rect, ClientRectObject } from '../types';\n\nexport default function rectToClientRect(rect: Rect): ClientRectObject {\n  return {\n    ...rect,\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height,\n  };\n}\n","// @flow\nimport type { ClientRectObject } from '../types';\nimport type { Boundary, RootBoundary } from '../enums';\nimport { viewport } from '../enums';\nimport getViewportRect from './getViewportRect';\nimport getDocumentRect from './getDocumentRect';\nimport listScrollParents from './listScrollParents';\nimport getOffsetParent from './getOffsetParent';\nimport getDocumentElement from './getDocumentElement';\nimport getComputedStyle from './getComputedStyle';\nimport { isElement, isHTMLElement } from './instanceOf';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport getDecorations from './getDecorations';\nimport contains from './contains';\nimport rectToClientRect from '../utils/rectToClientRect';\n\nfunction getClientRectFromMixedType(\n  element: Element,\n  clippingParent: Element | RootBoundary\n): ClientRectObject {\n  return clippingParent === viewport\n    ? rectToClientRect(getViewportRect(element))\n    : isHTMLElement(clippingParent)\n    ? getBoundingClientRect(clippingParent)\n    : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n}\n\n// A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\nfunction getClippingParents(element: Element): Array<Element> {\n  const clippingParents = listScrollParents(element);\n  const canEscapeClipping =\n    ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  const clipperElement =\n    canEscapeClipping && isHTMLElement(element)\n      ? getOffsetParent(element)\n      : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  }\n\n  // $FlowFixMe: https://github.com/facebook/flow/issues/1414\n  return clippingParents.filter(\n    clippingParent =>\n      isElement(clippingParent) && contains(clippingParent, clipperElement)\n  );\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping parents\nexport default function getClippingRect(\n  element: Element,\n  boundary: Boundary,\n  rootBoundary: RootBoundary\n): ClientRectObject {\n  const mainClippingParents =\n    boundary === 'clippingParents'\n      ? getClippingParents(element)\n      : [].concat(boundary);\n  const clippingParents = [...mainClippingParents, rootBoundary];\n  const firstClippingParent = clippingParents[0];\n\n  const clippingRect = clippingParents.reduce((accRect, clippingParent) => {\n    const rect = getClientRectFromMixedType(element, clippingParent);\n    const decorations = getDecorations(\n      isHTMLElement(clippingParent)\n        ? clippingParent\n        : getDocumentElement(element)\n    );\n\n    accRect.top = Math.max(rect.top + decorations.top, accRect.top);\n    accRect.right = Math.min(rect.right - decorations.right, accRect.right);\n    accRect.bottom = Math.min(rect.bottom - decorations.bottom, accRect.bottom);\n    accRect.left = Math.max(rect.left + decorations.left, accRect.left);\n\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n\n  return clippingRect;\n}\n","// @flow\nimport { type Variation, type Placement } from '../enums';\n\nexport default function getVariation(placement: Placement): ?Variation {\n  return (placement.split('-')[1]: any);\n}\n","// @flow\nimport type { Placement } from '../enums';\n\nexport default function getMainAxisFromPlacement(\n  placement: Placement\n): 'x' | 'y' {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}\n","// @flow\nimport getBasePlacement from './getBasePlacement';\nimport getVariation from './getVariation';\nimport getMainAxisFromPlacement from './getMainAxisFromPlacement';\nimport type {\n  Rect,\n  PositioningStrategy,\n  Offsets,\n  ClientRectObject,\n} from '../types';\nimport { top, right, bottom, left, start, end, type Placement } from '../enums';\n\nexport default function computeOffsets({\n  reference,\n  element,\n  placement,\n}: {\n  reference: Rect | ClientRectObject,\n  element: Rect | ClientRectObject,\n  strategy: PositioningStrategy,\n  placement?: Placement,\n}): Offsets {\n  const basePlacement = placement ? getBasePlacement(placement) : null;\n  const variation = placement ? getVariation(placement) : null;\n  const commonX = reference.x + reference.width / 2 - element.width / 2;\n  const commonY = reference.y + reference.height / 2 - element.height / 2;\n\n  let offsets;\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height,\n      };\n      break;\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height,\n      };\n      break;\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY,\n      };\n      break;\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY,\n      };\n      break;\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y,\n      };\n  }\n\n  const mainAxis = basePlacement\n    ? getMainAxisFromPlacement(basePlacement)\n    : null;\n\n  if (mainAxis != null) {\n    const len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] =\n          Math.floor(offsets[mainAxis]) -\n          Math.floor(reference[len] / 2 - element[len] / 2);\n        break;\n      case end:\n        offsets[mainAxis] =\n          Math.floor(offsets[mainAxis]) +\n          Math.ceil(reference[len] / 2 - element[len] / 2);\n        break;\n      default:\n    }\n  }\n\n  return offsets;\n}\n","// @flow\nimport type { SideObject } from '../types';\n\nexport default function getFreshSideObject(): SideObject {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n  };\n}\n","// @flow\nimport type { SideObject } from '../types';\nimport getFreshSideObject from './getFreshSideObject';\n\nexport default function mergePaddingObject(\n  paddingObject: $Shape<SideObject>\n): SideObject {\n  return {\n    ...getFreshSideObject(),\n    ...paddingObject,\n  };\n}\n","// @flow\n\nexport default function expandToHashMap<\n  T: number | string | boolean,\n  K: string\n>(value: T, keys: Array<K>): { [key: string]: T } {\n  return keys.reduce((hashMap, key) => {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}\n","// @flow\nimport type { State, SideObject, Padding } from '../types';\nimport type { Placement, Boundary, RootBoundary, Context } from '../enums';\nimport getBoundingClientRect from '../dom-utils/getBoundingClientRect';\nimport getClippingRect from '../dom-utils/getClippingRect';\nimport getDocumentElement from '../dom-utils/getDocumentElement';\nimport computeOffsets from './computeOffsets';\nimport rectToClientRect from './rectToClientRect';\nimport {\n  clippingParents,\n  reference,\n  popper,\n  bottom,\n  top,\n  right,\n  basePlacements,\n  viewport,\n} from '../enums';\nimport { isElement } from '../dom-utils/instanceOf';\nimport mergePaddingObject from './mergePaddingObject';\nimport expandToHashMap from './expandToHashMap';\n\ntype Options = {\n  placement: Placement,\n  boundary: Boundary,\n  rootBoundary: RootBoundary,\n  elementContext: Context,\n  altBoundary: boolean,\n  padding: Padding,\n};\n\nexport default function detectOverflow(\n  state: State,\n  options: $Shape<Options> = {}\n): SideObject {\n  const {\n    placement = state.placement,\n    boundary = clippingParents,\n    rootBoundary = viewport,\n    elementContext = popper,\n    altBoundary = false,\n    padding = 0,\n  } = options;\n\n  const paddingObject = mergePaddingObject(\n    typeof padding !== 'number'\n      ? padding\n      : expandToHashMap(padding, basePlacements)\n  );\n\n  const altContext = elementContext === popper ? reference : popper;\n\n  const referenceElement = state.elements.reference;\n  const popperRect = state.rects.popper;\n  const element = state.elements[altBoundary ? altContext : elementContext];\n\n  const clippingClientRect = getClippingRect(\n    isElement(element)\n      ? element\n      : element.contextElement || getDocumentElement(state.elements.popper),\n    boundary,\n    rootBoundary\n  );\n\n  const referenceClientRect = getBoundingClientRect(referenceElement);\n\n  const popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement,\n  });\n\n  const popperClientRect = rectToClientRect({\n    ...popperRect,\n    ...popperOffsets,\n  });\n\n  const elementClientRect =\n    elementContext === popper ? popperClientRect : referenceClientRect;\n\n  // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n  const overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom:\n      elementClientRect.bottom -\n      clippingClientRect.bottom +\n      paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right:\n      elementClientRect.right - clippingClientRect.right + paddingObject.right,\n  };\n\n  const offsetData = state.modifiersData.offset;\n\n  // Offsets can be applied only to the popper element\n  if (elementContext === popper && offsetData) {\n    const offset = offsetData[placement];\n\n    Object.keys(overflowOffsets).forEach(key => {\n      const multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      const axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}\n"],"names":["getBoundingClientRect","element","rect","width","height","top","right","bottom","left","x","y","getWindow","node","toString","ownerDocument","defaultView","window","getWindowScroll","win","scrollLeft","pageXOffset","scrollTop","pageYOffset","isElement","OwnElement","Element","isHTMLElement","HTMLElement","getHTMLElementScroll","getNodeScroll","getNodeName","nodeName","toLowerCase","getDocumentElement","document","documentElement","getWindowScrollBarX","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","scroll","offsets","clientLeft","clientTop","getLayoutRect","offsetLeft","offsetTop","offsetWidth","offsetHeight","getParentNode","parentNode","host","getComputedStyle","getScrollParent","indexOf","body","overflow","overflowX","overflowY","test","listScrollParents","list","scrollParent","isBody","target","updatedList","concat","isTableElement","getTrueOffsetParent","position","getOffsetParent","auto","basePlacements","start","end","clippingParents","viewport","popper","reference","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","order","modifiers","map","Map","visited","Set","result","forEach","modifier","set","name","sort","add","requires","requiresIfExists","dep","has","depModifier","get","push","orderModifiers","orderedModifiers","reduce","acc","phase","filter","debounce","fn","pending","Promise","resolve","then","undefined","format","str","args","p","c","replace","INVALID_MODIFIER_ERROR","MISSING_DEPENDENCY_ERROR","VALID_PROPERTIES","validateModifiers","Object","keys","key","console","error","String","enabled","join","effect","Array","isArray","s","requirement","find","mod","uniqueBy","arr","identifiers","item","identifier","getBasePlacement","placement","split","mergeByName","merged","current","existing","options","data","INVALID_ELEMENT_ERROR","INFINITE_LOOP_ERROR","DEFAULT_OPTIONS","strategy","areValidElements","some","popperGenerator","generatorOptions","defaultModifiers","defaultOptions","createPopper","state","modifiersData","elements","attributes","styles","effectCleanupFns","isDestroyed","instance","setOptions","cleanupModifierEffects","scrollParents","contextElement","m","flipModifier","marginTop","marginRight","marginBottom","marginLeft","margin","parseFloat","warn","runModifierEffects","update","forceUpdate","rects","reset","__debug_loops__","index","length","destroy","onFirstUpdate","cleanupFn","noopFn","getViewportRect","innerWidth","innerHeight","getDocumentRect","winScroll","documentRect","Math","max","toNumber","cssValue","getBorders","computedStyle","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getDecorations","borders","isHTML","winScrollBarX","clientWidth","clientHeight","contains","parent","child","isShadow","Boolean","getRootNode","next","isSameNode","rectToClientRect","getClientRectFromMixedType","clippingParent","getClippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","decorations","min","getVariation","getMainAxisFromPlacement","computeOffsets","basePlacement","variation","commonX","commonY","mainAxis","len","floor","ceil","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","value","hashMap","detectOverflow","elementContext","altBoundary","padding","altContext","referenceElement","popperRect","clippingClientRect","referenceClientRect","popperOffsets","popperClientRect","elementClientRect","overflowOffsets","offsetData","offset","multiply","axis"],"mappings":"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"}