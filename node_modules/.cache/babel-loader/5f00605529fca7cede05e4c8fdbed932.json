{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _copy = _interopRequireDefault(require(\"../rect/copy\"));\n\nvar _crop = _interopRequireDefault(require(\"../rect/crop\"));\n\nvar _slice = _interopRequireDefault(require(\"../block/slice\"));\n\nvar _height = _interopRequireDefault(require(\"../block/height\"));\n\nvar _truncate = _interopRequireDefault(require(\"../block/truncate\"));\n\nvar _layoutParagraph = _interopRequireDefault(require(\"./layoutParagraph\"));\n\nvar _sliceAtHeight = _interopRequireDefault(require(\"../block/sliceAtHeight\"));\n/**\n * Layout paragraphs inside container until it does not\n * fit anymore, performing line wrapping in the process.\n *\n * @param  {Object}  engines\n * @param  {Object}  layout options\n * @param  {Object}  container rect\n * @param  {Object}  attributed strings (paragraphs)\n * @return {Array} paragraph blocks\n */\n\n\nvar typesetter = function typesetter(engines, options, container, attributedStrings) {\n  var blocks = [];\n  var paragraphs = [].concat(attributedStrings);\n  var maxLines = R.propOr(Infinity, 'maxLines', container);\n  var truncateEllipsis = container.truncateMode === 'ellipsis';\n  var linesCount = maxLines;\n  var paragraphRect = (0, _copy[\"default\"])(container);\n  var nextParagraph = paragraphs.shift();\n\n  while (linesCount > 0 && nextParagraph) {\n    var block = (0, _layoutParagraph[\"default\"])(engines, options)(paragraphRect, nextParagraph);\n    var slicedBlock = (0, _slice[\"default\"])(linesCount, block);\n    var linesHeight = (0, _height[\"default\"])(slicedBlock);\n    var shouldTruncate = truncateEllipsis && block.length !== slicedBlock.length;\n    linesCount -= slicedBlock.length;\n\n    if (paragraphRect.height >= linesHeight) {\n      blocks.push(R.when(R.always(shouldTruncate), _truncate[\"default\"])(slicedBlock));\n      paragraphRect = (0, _crop[\"default\"])(linesHeight, paragraphRect);\n      nextParagraph = paragraphs.shift();\n    } else {\n      blocks.push(R.compose(_truncate[\"default\"], (0, _sliceAtHeight[\"default\"])(paragraphRect.height))(slicedBlock));\n      break;\n    }\n  }\n\n  return blocks;\n};\n\nvar _default = R.curryN(4, typesetter);\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}